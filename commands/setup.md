---
description: "Initialize YPM data directory and configuration"
---

<!-- Language Handling: Check ~/.ypm/config.yml for settings.language -->
<!-- If language is not "en", translate all output to that language -->

# YPM Setup - Initial Configuration

Set up YPM for global usage. This command creates the data directory and configuration file.

## What This Command Does

1. Create `~/.ypm/` directory for YPM data
2. Create `~/.ypm/config.yml` with your settings (interactive)
3. Optionally link commands to `~/.claude/commands/` for prefix-free access

---

## Execution Steps

### STEP 1: Check Existing Installation

```bash
ls -la ~/.ypm/config.yml 2>/dev/null && echo "EXISTS" || echo "NOT_FOUND"
```

**If EXISTS**: Ask user if they want to reconfigure or skip setup.

**If NOT_FOUND**: Proceed to STEP 2.

---

### STEP 2: Create Data Directory

```bash
mkdir -p ~/.ypm
```

Report to user:
```
Created ~/.ypm/ directory for YPM data.
```

---

### STEP 3: Configure Monitoring Directories

Use **AskUserQuestion** to collect configuration:

#### Question 1: Project Directories

**Question**:
```
Which directories contain your projects?
Enter absolute paths, one per line or comma-separated.

Examples:
  - /Users/yourname/Projects
  - /Users/yourname/Work
  - ~/Src (will be expanded)
```

**Collect**: List of directories to monitor

#### Question 2: Detection Patterns

**Question**:
```
How are your projects organized within these directories?

Select patterns that match your structure:
```

**Options (multiSelect: true)**:
1. **Direct children** - Projects are direct subdirectories (e.g., ~/Projects/my-app)
2. **Grouped by category** - Projects are in category folders (e.g., ~/Projects/web/my-app)
3. **Prefixed directories** - Projects use prefixes (e.g., ~/Src/proj_*/*)

#### Question 3: Activity Thresholds

**Question**:
```
How do you want to classify project activity?
```

**Options**:
1. **Default** - Active: 7 days, Inactive: 30 days
2. **Relaxed** - Active: 14 days, Inactive: 60 days
3. **Strict** - Active: 3 days, Inactive: 14 days

---

### STEP 4: Generate config.yml

Use **Write tool** to create `~/.ypm/config.yml`:

```yaml
# YPM Configuration
# Generated by /ypm:setup

monitor:
  # Directories containing your projects
  directories:
    - /path/to/your/projects
    # Add more directories as needed

  # Patterns to detect projects within directories
  patterns:
    - "*"           # Direct children
    # - "*/*"       # One level deep
    # - "proj_*/*"  # Prefixed directories

  # Exclusion patterns
  # Specify as relative path or partial match
  # Examples:
  exclude: []
    # - "node_modules"
    # - ".archived"
    # - "tmp"

  # Projects to hide from /ypm:open (but still scanned)
  ignore_in_open: []

# Editor configuration
editor:
  default: code    # code, cursor, zed, terminal

# Activity classification thresholds
classification:
  active_days: 7       # Updated within N days = active
  inactive_days: 30    # No updates for N days = inactive
```

---

### STEP 5: Verify Installation

```bash
cat ~/.ypm/config.yml
```

Display configuration and confirm:

```
YPM Setup Complete!

Configuration: ~/.ypm/config.yml
Data file: ~/.ypm/PROJECT_STATUS.md (will be created on first update)

Next steps:
1. Review your configuration: cat ~/.ypm/config.yml
2. Run your first scan: /ypm:update

Your projects will be scanned from:
  - /path/to/your/projects
  - ...
```

---

## Reconfiguration

To reconfigure YPM, run this command again. It will detect the existing configuration and ask if you want to update it.

## Uninstall

To remove YPM data:
```bash
rm -rf ~/.ypm
```

---

**Always confirm successful setup with the user.**
